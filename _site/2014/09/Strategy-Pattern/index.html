<!DOCTYPE html>
<html class=" js flexbox canvas canvastext webgl no-touch geolocation postmessage websqldatabase indexeddb hashchange history draganddrop websockets rgba hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths no-bgrepeatround no-bgrepeatspace display-table boxsizing pointerevents no-overflowscrolling cubicbezierrange bgsizecover details no-createelement-attrs progressbar meter customprotocolhandler no-userselect no-emoji file devicemotion deviceorientation no-csshyphens no-workingcsshyphens no-softhyphens no-softhyphensfind no-framed sharedworkers no-webp datauri">
    <head>
        <meta charset="utf-8" />
        <title>策略模式</title>
       
        <link rel="stylesheet" href="/media/css/bootstrapv3.min.css" type="text/css" />
        <link rel="stylesheet" href="/media/css/default.min.css" type="text/css" />
		<link rel="stylesheet" href="/media/css/mystyle.css" type="text/css" />
        <script src="/media/js/jquery-1.7.1.min.min.js" type="text/javascript"></script>
        <script src="/media/js/bootstrapv3.min.js" type="text/javascript" ></script>
        <script src="/media/js/bootstrap-paginator.min.js" type="text/javascript"></script>
        <script src="/media/js/main.js" type="text/javascript"></script>
    </head>
    <body>
        




    <link rel="prev" title="在Cygwin中安装Jekyll" href="/2014/08/Install-Jekyll-in-Cygwin/">


    <link rel="next" title="N个点求最大斜率" href="/2014/10/Find-MaxK-from-N-points/">

<meta property="og:type" content="blog"/>
<meta property="og:title" content="策略模式"/>
<meta property="og:description" content="" />
<meta property="og:author" content="Kevin"/>
<meta property="og:release_date" content="2014-09-10 00:00:00"/>
<link rel="stylesheet" href="/javascripts/prettify/prettify.min.css" />
<style type="text/css">
    body { background:#e8e8e8; }
    @media screen and (max-width: 750px){
        body { background:#fff; }
    }
    @media screen and (max-width: 1020px){
        body { background:#fff; }
    }
</style>
<div id="content" class="clearfix">
    <div class="entry-header">
        <div class="index-content">
            <ul class="artical-cate">
                
            </ul>
        </div>
    </div>
    <div class="entry">
        <h1 class="entry-title"><a href="/2014/09/Strategy-Pattern/" title="策略模式">策略模式</a></h1>
        <p class="entry-attr">作者: <span  class="entry-author">Kevin</span> | 更新日期: <time  class="entry-date">2014-09-10 00:00:00</time></p>
        <p><blockquote></blockquote></p>
        <h2>1. 定义</h2>

<p>策略模式体现了这样两个原则——封装变化和对接口编程而不是对实现编程。设计模式的作者把策略模式定义如下：</p>

<blockquote><p>Define a family of algorithms, encapsulate each one, and make them interchangeable. [The] Strategy [pattern] lets the algorithm vary independently from clients that use it.</p>

<p>(策略模式定义了一系列的算法，并将每一个算法封装起来，而且使它们还可以相互替换。策略模式让算法独立于使用它的客户而变化。)</p></blockquote>

<h2>2. 实现</h2>

<h3>2.1 基本结构</h3>

<p><img src="http://xiangshuai.github.io/resources/Strategy-Pattern-2014213800.png" alt="" /></p>

<h3>2.2 流程</h3>

<ol>
<li>为策略对象定义Strategy接口。</li>
<li>编写ConcreteStrategy类实现Strategy接口，ConcreteStrategy包装相关算法和行为。</li>
<li>在Context类中，保持对Strategy对象的私有引用。</li>
<li>在Context类中，实现Strategy对象的set和get方法。
Strategy接口定义了Strategy对象的行为；具体的ConcreteStrategy类实现了Strategy接口；Context类使用Strategy对象。</li>
</ol>


<h2>3. 应用</h2>

<ol>
<li>许多相关的类仅仅是行为有异。“策略”提供了一种用多个行为中的一个行为来配置一个类的方法。</li>
<li>需要使用一个算法的不同变体。例如，你可能会定义一些反映不同的空间/时间权衡的算法。当这些变体实现为一个算法的类层次时，可以使用策略模式。</li>
<li>算法使用客户不应该知道的数据。可使用策略模式以避免暴露复杂的、与算法相关的数据结构。</li>
<li>一个类定义了多种行为，并且这些行为在这个类的操作中以多个条件语句的形式出现。将相关的条件分支移入它们各自的 Strategy类中以代替这些条件语句。</li>
</ol>


<h2>4. 实例</h2>

<h3>4.1 简单购物车</h3>

<p>在实现购物车应用时，关于支付方式可能需要提供多种策略，比如信用卡支付或PayPal等网上支付方式，通过策略模式进行简单实现，类图如下：</p>

<p><img src="http://xiangshuai.github.io/resources/Strategy-Pattern-2014213900.png" alt="" /></p>

<p>具体实现详见：<a href="http://www.journaldev.com/1754/strategy-design-pattern-in-java-example-tutorial">Strategy Design Pattern in Java – Example Tutorial</a></p>

<h3>4.2 Java Comparable and Comparator</h3>

<p>定义Strategy：</p>

<pre><code>public interface Comparator {
    public int compare(Object o1, Object o2);
}
</code></pre>

<p>日期类实现Strategy接口：</p>

<pre><code>public class DateComparator implements Comparator {
    public int compare(Object o1, Object o2) {
        return ((Date) o1).compareTo((Date) o2);
    }
}
</code></pre>

<p>字符串比较类实现Strategy接口：</p>

<pre><code>public class StringIntegerComparator implements Comparator {
    public int compare(Object o1, Object o2) {
        return Integer.parseInt((String) o1) -Integer.parseInt((String) o2);
    }
}
</code></pre>

<p>倒转行为实现Strategy接口：</p>

<pre><code>public class ReverseComparator implements Comparator {
    private final Comparator c;
    public ReverseComparator(Comparator c) {this.c = c; }
    public int compare(Object o1, Object o2) {
        return c.compare(o2, o1);
    }
}
</code></pre>

<p>在对String数组逆序输出时，便可使用：</p>

<pre><code>Arrays.sort(stringArray, new ReverseComparator(new StringIntegerComparator()));
</code></pre>

<p>后续...</p>

<h2>5. 参考：</h2>

<ol>
<li><a href="http://www.journaldev.com/780/java-comparable-and-comparator-example-to-sort-objects">Java Comparable and Comparator Example to sort Objects</a></li>
<li><a href="https://thenewcircle.com/static/bookshelf/java_fundamentals_tutorial/design_patterns.html">Java Fundamentals Tutorial : Design Patterns</a></li>
<li><a href="http://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns">Examples of GoF Design Patterns</a></li>
</ol>


        <div class="ad-content-footer"></div>
        <footer class="unit-foot">
            <div class="unit-inner unit-foot-inner">
                <nav class="pagination">
                    <ul>
                        
                        <li class="prev"><a class="internal" rel="prev"  href="/2014/08/Install-Jekyll-in-Cygwin/" title="View 在Cygwin中安装Jekyll">&laquo; 在Cygwin中安装Jekyll</a></li>
                        
                        
                        <li class="pipe"> | </li>
                        
                        
                        <li class="next"><a class="internal" rel="next"  href="/2014/10/Find-MaxK-from-N-points/" title="View N个点求最大斜率">N个点求最大斜率 &raquo;</a></li>
                        
                    </ul>
                </nav>
                <p class="gotop">
                    <a href="#">Back to Top</a>
                </p>
            </div>
        </footer>
		<section class="comment">
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/2014/09/Strategy-Pattern" data-title="策略模式" data-url="xiangshuai.github.com//2014/09/Strategy-Pattern/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"kevingit"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->


    </div>

    <div id="menuIndex" class="sidenav"></div>
</div>

<script src="/media/js/post.min.js" type="text/javascript"></script>

        <div class="home-menu">
            <div class="home-icon-con">
                <a class="home-menu-icon" href="/">Kevin</a>
                <a class="home-follow" href="#" title="Contact Me">+</a>
            </div>
            <div class="home-contact">
                
            </div>
        </div>
<!-- footer -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53993758-1', 'auto');
  ga('send', 'pageview');
</script>

    </body>
</html>
