<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="Kevin" />
    <title>策略模式 | Kevin</title>
    <link href="/feed/" rel="alternate" title="Kevin" type="application/atom+xml" />
    
    <link rel="stylesheet" href="/media/css/highlight.css">
    <link href='/media/webfonts/ss-social.css' rel='stylesheet'>
    <link href='/media/webfonts/ss-standard.css' rel='stylesheet'>
    <link href="/media/css/font-awesome.css" rel="stylesheet">
    <link href="/media/css/screen.css" rel="stylesheet">
	<link href="/media/prettify/prettify.css" rel="stylesheet" type="text/css" media="all">
	<link rel="stylesheet" href="/media/css/default.css" type="text/css" />
    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="/media/js/outliner.js" ></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <div class="buttons">
          <a href="/" class="ss-icon" title="Home">home</a>
          <a href="/categories" class="ss-icon" title="Categories" >list</a>
          <a href="/tags" class="ss-icon" title="Tags" >tags</a>
          <a href="/guestbook" class="ss-icon" title="Guest Book" >talk</a>
          <a href="/about" class="ss-icon" title="About" >user</a>
	  <a href="/links" class="ss-icon" title="Links">link</a>
          <a href="/feed" class="ss-icon" title="Subscribe RSS" >rss</a>
        </div>
        <h1>策略模式</h1>
        </header>
        <hr>
        <article class="content">
        <section class="top-meta">

<span class="categories">
  categories
  
  <a href="/categories/#设计模式" title="设计模式">设计模式</a>&nbsp;
  
</span>


 | 
<span class="tags">
  tags
  
  <a href="/tags/#java" title="java">java</a>&nbsp;
  
</span>

</section>
<section class="post">
<h2>1. 定义</h2>

<p>策略模式体现了这样两个原则——封装变化和对接口编程而不是对实现编程。设计模式的作者把策略模式定义如下：</p>

<blockquote><p>Define a family of algorithms, encapsulate each one, and make them interchangeable. [The] Strategy [pattern] lets the algorithm vary independently from clients that use it.</p>

<p>(策略模式定义了一系列的算法，并将每一个算法封装起来，而且使它们还可以相互替换。策略模式让算法独立于使用它的客户而变化。)</p></blockquote>

<h2>2. 实现</h2>

<h3>2.1 基本结构</h3>

<p><img src="http://xiangshuai.github.io/resources/Strategy-Pattern-2014213800.png" alt="" /></p>

<h3>2.2 流程</h3>

<ol>
<li>为策略对象定义Strategy接口。</li>
<li>编写ConcreteStrategy类实现Strategy接口，ConcreteStrategy包装相关算法和行为。</li>
<li>在Context类中，保持对Strategy对象的私有引用。</li>
<li>在Context类中，实现Strategy对象的set和get方法。
Strategy接口定义了Strategy对象的行为；具体的ConcreteStrategy类实现了Strategy接口；Context类使用Strategy对象。</li>
</ol>


<h2>3. 应用</h2>

<ol>
<li>许多相关的类仅仅是行为有异。“策略”提供了一种用多个行为中的一个行为来配置一个类的方法。</li>
<li>需要使用一个算法的不同变体。例如，你可能会定义一些反映不同的空间/时间权衡的算法。当这些变体实现为一个算法的类层次时，可以使用策略模式。</li>
<li>算法使用客户不应该知道的数据。可使用策略模式以避免暴露复杂的、与算法相关的数据结构。</li>
<li>一个类定义了多种行为，并且这些行为在这个类的操作中以多个条件语句的形式出现。将相关的条件分支移入它们各自的 Strategy类中以代替这些条件语句。</li>
</ol>


<h2>4. 实例</h2>

<h3>4.1 简单购物车</h3>

<p>在实现购物车应用时，关于支付方式可能需要提供多种策略，比如信用卡支付或PayPal等网上支付方式，通过策略模式进行简单实现，类图如下：</p>

<p><img src="http://xiangshuai.github.io/resources/Strategy-Pattern-2014213900.png" alt="" /></p>

<p>具体实现详见：<a href="http://www.journaldev.com/1754/strategy-design-pattern-in-java-example-tutorial">Strategy Design Pattern in Java – Example Tutorial</a></p>

<h3>4.2 Java Comparable and Comparator</h3>

<p>定义Strategy：</p>

<pre><code>public interface Comparator {
    public int compare(Object o1, Object o2);
}
</code></pre>

<p>日期类实现Strategy接口：</p>

<pre><code>public class DateComparator implements Comparator {
    public int compare(Object o1, Object o2) {
        return ((Date) o1).compareTo((Date) o2);
    }
}
</code></pre>

<p>字符串比较类实现Strategy接口：</p>

<pre><code>public class StringIntegerComparator implements Comparator {
    public int compare(Object o1, Object o2) {
        return Integer.parseInt((String) o1) -Integer.parseInt((String) o2);
    }
}
</code></pre>

<p>倒转行为实现Strategy接口：</p>

<pre><code>public class ReverseComparator implements Comparator {
    private final Comparator c;
    public ReverseComparator(Comparator c) {this.c = c; }
    public int compare(Object o1, Object o2) {
        return c.compare(o2, o1);
    }
}
</code></pre>

<p>在对String数组逆序输出时，便可使用：</p>

<pre><code>Arrays.sort(stringArray, new ReverseComparator(new StringIntegerComparator()));
</code></pre>

<p>后续...</p>

<h2>5. 参考：</h2>

<ol>
<li><a href="http://www.journaldev.com/780/java-comparable-and-comparator-example-to-sort-objects">Java Comparable and Comparator Example to sort Objects</a></li>
<li><a href="https://thenewcircle.com/static/bookshelf/java_fundamentals_tutorial/design_patterns.html">Java Fundamentals Tutorial : Design Patterns</a></li>
<li><a href="http://stackoverflow.com/questions/1673841/examples-of-gof-design-patterns">Examples of GoF Design Patterns</a></li>
</ol>


</section>
<section class="meta">
<span class="author">
  <a href="http://xiangshuai.github.com">Kevin</a>
</span>
<span class="time">
  /
  <time datetime="2014-09-10">2014-09-10</time>
</span>
</section>

<section align="right">
<br/>
<span>
	<a  href="/2014/08/Install-Jekyll-in-Cygwin/" class="pageNav"  >上一篇</a>
	&nbsp;&nbsp;&nbsp;
	<a  href="/2014/10/Find-MaxK-from-N-points/" class="pageNav"  >下一篇</a>
</span>
</section>
<section class="comment">
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/2014/09/Strategy-Pattern" data-title="策略模式" data-url="xiangshuai.github.com//2014/09/Strategy-Pattern/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"kevingit"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->


<script type="text/javascript">
$(function(){
  $(document).keydown(function(e) {
    var url = false;
        if (e.which == 37 || e.which == 74) {  // Left arrow and J
            
        url = 'https://xiangshuai.github.com//2014/08/Install-Jekyll-in-Cygwin/';
        
        }
        else if (e.which == 39 || e.which == 75) {  // Right arrow and K
            
        url = 'https://xiangshuai.github.com//2014/10/Find-MaxK-from-N-points/';
        
        }
        if (url) {
            window.location = url;
        }
  });
})
</script>


        </article>
	<a style="position:fixed;bottom:5px;right:5px;" href="#" title="Back to Top">
            <img src="/media/assets/btt.png" />
        </a> 
      </div>

    <footer>
        <p><small>Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a> | Copyright 2008 - 2014 by <a href="http://xiangshuai.github.com/about/">Kevin</a> | <span class="label label-info">2014-10-30 21:01:57 CST</span></small></p>
    </footer>

    </div>
	<script type="text/javascript" src="/media/prettify/prettify.js"></script>
	<script type="text/javascript">
    // 需要引入jQuery
    $(document).ready(function() {
        $('pre').addClass('prettyprint linenums');
        prettyPrint();
    });
	</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53993758-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
